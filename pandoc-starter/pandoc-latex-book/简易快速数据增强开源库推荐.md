---
title: "简易快速数据增强开源库推荐"
author: [GiantPandaCV-BBuf]
date: "2020-05-25"
subject: "Markdown"
keywords: [数据增强]
subtitle: "GiantPandaCV公众号出品"
titlepage: true
titlepage-text-color: "000000"
titlepage-background: "background1.pdf"
---


# 简易快速数据增强开源库推荐

## 0. 序言 

版权声明：此份电子书整理自公众号「GiantPandaCV 」, 版权所有 GiantPandaCV , 禁止任何形式的 转载, 禁止传播、商用, 违者必究！ GiantPandaCV 公众号由专注于技术的一群 90 后创建, 专注于机器学习、深度学习、计算机视觉、图 像处理等领域。每天更新一到两篇相关推文, 希望在传播知识、分享知识的同时能够启发你。 欢迎关注我们的公众号 GiantPandaCV:

![](https://img-blog.csdnimg.cn/20200116212417846.jpg)



## 1. 数据增强库albumentations用法

官网：https://albumentations.readthedocs.io/en/latest/index.html

### 1.1 简介

- 基于高度优化的OpenCV库的快速扩充。
- 超级简单但功能强大的界面，可用于不同的任务，例如（分段，检测等）。
- 易于定制。
- 易于添加其他框架。

### 1.2 环境配置

- Python3.6.3
- albumentations 0.4.5

安装方法：

```
pip install albumentations
```

### 1.3 图像分类增强

`import ambumentations`

- `Blur（blur_limit = 7，p = 0.5 ）`图像均值平滑滤波
  - `--p`代表概率
  - `--blur_limit`代表模糊输入图像的最大内核大小，默认值[3，7]
  - 效果

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% align="center"}

输出图片：

![](https://img-blog.csdnimg.cn/20200325153702384.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `VerticalFlip(p = 0.5 )` 水平翻转
  - `--p`代表概率
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325153820288.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }



- `HorizontalFlip(p = 0.5)`垂直翻转
  - `--p`代表概率
  - 效果：

输入图片：



![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：



![](https://img-blog.csdnimg.cn/20200325154018908.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }



- `Flip(p = 0.5 )`水平和垂直操作
  - `--p`代表概率
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/202003251540460.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `Normalize(mean=(0.485, 0.456, 0.406), std=(0.229, 0.224, 0.225), max_pixel_value=255.0, always_apply=False, p=1.0)`归一化
  - `--mean`代表执行操作的均值
    
  - `--std`代表执行操作的标准差
    
  - `--p`代表概率

- `Transpose(p=0.5)`转置，将图像的行和列进行互换
  - `--p`代表概率
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325154131740.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }

- `RandomCrop(height, width, p=1.0)`随机裁剪
  - `--height`代表随机裁剪高度，必须是整数
  - `--width`代表随机裁剪高度，必须是整数
  - `--p`代表概率
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325154158220.jpg){ width=30% }

- `RandomGamma(gamma_limit=(80, 120)，p=0.5)`随机Gamma变换
  - `--gamma_limit`代表伽马极限，默认值（80，120）
  - `--p`代表概率
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }


输出图片：

![](https://img-blog.csdnimg.cn/20200325154245652.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }




- `RandomRotate90(p=0.5)`随机旋转90度零次或多次。
  - `--p`代表概率
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }


输出图片：

![](https://img-blog.csdnimg.cn/20200325154322155.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }



- `Rotate(limit=90, interpolation=1, border_mode=4, value=None, mask_value=None, , p=0.5)`旋转
  - `--limit`如果limit是（int, int）从中随机选择，如果是int，则从（-int， int）随机选择，默认值（-90，90）
  - `--interpolation`指定插值算法的标志（cv2.INTER_NEAREST、cv2.INTER_LINEAR、cv2.INTER_CUBIC、cv2.INTER_AREA、cv2.INTER_LANCZOS4），默认值：cv2.INTER_LINEAR
  - `--border_mode`用于指定像素外推方法的标志(cv2.BORDER_常量、cv2.BORDER_REPLICATE、cv2.BORDER_REFLECT、cv2.BORDER_WRAP、cv2.BORDER_REFLECT_101之一)。默认值：cv2.BORDER_REFLECT_101
  - `--value`值，如果border_mode为cv2.border_CONSTANT，则填充值。
  - `--mask_value`int列表，float列表：如果border_mode为cv2，则填充值。border_常量应用于掩码。
  - `--p`代表概率
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }


输出图片：

![](https://img-blog.csdnimg.cn/20200325154348422.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }



- `ShiftScaleRotate(shift_limit=0.0625, scale_limit=0.1, rotate_limit=45, interpolation=1, border_mode=4, value=None, mask_value=None, p=0.5)`随机平移、缩放、旋转图片。
  - `--shift_limit`高度和宽度的移位因子范围。如果shift_limit是单个浮点值，则范围为（-shift_limit，shift_limit）。上下限的绝对值应在范围[0，1]内。默认值：（-0.0625，0.0625）。
  - `--scale_limit`比例限制。如果scale_limit是单个浮点值，则范围为（-scale_limit，scale_limit）。默认值：（-0.1，0.1）。
  - `--rotate_limit`  int值，则范围为（-rotate_limit，rotate_limit）。默认值：（-45，45）。
  - `--interpolation`指定插值算法的标志（cv2.INTER_NEAREST、cv2.INTER_LINEAR、cv2.INTER_CUBIC、cv2.INTER_AREA、cv2.INTER_LANCZOS4），默认值：cv2.INTER_LINEAR
  - `--border_mode`用于指定像素外推方法的标志(cv2.BORDER_常量、cv2.BORDER_REPLICATE、cv2.BORDER_REFLECT、cv2.BORDER_WRAP、cv2.BORDER_REFLECT_101之一)。默认值：cv2.BORDER_REFLECT_101
  - `--value`值，如果border_mode为cv2.border_CONSTANT，则填充值。
  - `--mask_value`int列表，float列表：如果border_mode为cv2，则填充值。border_常量应用于掩码。
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }


输出图片：

![](https://img-blog.csdnimg.cn/20200325154431148.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `CenterCrop(height, width, p=1.0)`随机中心裁剪
  - `--height`代表随机裁剪高度，必须是整数
  - `--width`代表随机裁剪高度，必须是整数
  - `--p`代表概率
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }


输出图片：

![](https://img-blog.csdnimg.cn/20200325154459416.jpg){ width=30% }



- `OpticalDistortion(distort_limit=0.05, shift_limit=0.05, interpolation=1, border_mode=4, value=None, mask_value=None, p=0.5)`光学畸变。
  - `--distort_limit`扭曲极限,如果扭曲极限是一个单浮点数，则范围将是（-warte极限，warte极限）。默认值：（-0.05，0.05）。
  - `--shift_limit`如果shift_limit是单个float，则范围为（-shift_limit，shift_limit）。默认值：（-0.05，0.05）。
  - `--interpolation`指定插值算法的标志（cv2.INTER_NEAREST、cv2.INTER_LINEAR、cv2.INTER_CUBIC、cv2.INTER_AREA、cv2.INTER_LANCZOS4），默认值：cv2.INTER_LINEAR
  - `--border_mode`用于指定像素外推方法的标志(cv2.BORDER_常量、cv2.BORDER_REPLICATE、cv2.BORDER_REFLECT、cv2.BORDER_WRAP、cv2.BORDER_REFLECT_101之一)。默认值：cv2.BORDER_REFLECT_101
  - `--value`值，如果border_mode为cv2.border_CONSTANT，则填充值。
  - `--mask_value`int列表，float列表：如果border_mode为cv2，则填充值。border_常量应用于掩码。
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }


输出图片：

![](https://img-blog.csdnimg.cn/20200325154522233.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }



- `GridDistortion(num_steps=5, distort_limit=0.3, interpolation=1, border_mode=4, value=None, mask_value=None,  p=0.5)`网格失真
  - `--num_steps`每侧网格单元的计数
  - `--distort_limit`扭曲极限,如果扭曲极限是一个单浮点数，则范围将是（-warte极限，warte极限）。默认值：（-0.03，0.03）。
  - `--interpolation`指定插值算法的标志（cv2.INTER_NEAREST、cv2.INTER_LINEAR、cv2.INTER_CUBIC、cv2.INTER_AREA、cv2.INTER_LANCZOS4），默认值：cv2.INTER_LINEAR
  - `--border_mode`用于指定像素外推方法的标志(cv2.BORDER_常量、cv2.BORDER_REPLICATE、cv2.BORDER_REFLECT、cv2.BORDER_WRAP、cv2.BORDER_REFLECT_101之一)。默认值：cv2.BORDER_REFLECT_101
  - `--value`值，如果border_mode为cv2.border_CONSTANT，则填充值。
  - `--mask_value`int列表，float列表：如果border_mode为cv2，则填充值。border_常量应用于掩码。
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325154608870.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `ElasticTransform（alpha = 1，sigma = 50，alpha_affine = 50，interpolation = 1，border_mode = 4，value = None，mask_value = None，approximate = False，p = 0.5 ）`弹性变换
  - `--alpha`浮点数
  - `--sigma`高斯滤波器参数
  - `--alpha_affine`阿尔法仿射（浮点）–范围为（-阿尔法仿射，阿尔法仿射）
  - `--interpolation`指定插值算法的标志（cv2.INTER_NEAREST、cv2.INTER_LINEAR、cv2.INTER_CUBIC、cv2.INTER_AREA、cv2.INTER_LANCZOS4），默认值：cv2.INTER_LINEAR
  - `--border_mode`用于指定像素外推方法的标志(cv2.BORDER_常量、cv2.BORDER_REPLICATE、cv2.BORDER_REFLECT、cv2.BORDER_WRAP、cv2.BORDER_REFLECT_101之一)。默认值：cv2.BORDER_REFLECT_101
  - `--value`值，如果border_mode为cv2.border_CONSTANT，则填充值。
  - `--mask_value`int列表，float列表：如果border_mode为cv2，则填充值。border_常量应用于掩码。
  - `--approximate`近似（布尔）–是否平滑具有固定核大小的置换贴图。启用此选项可使大图像的速度提高约2倍。
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325154638275.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `RandomGridShuffle(grid=(3, 3)， p=1.0)`随机网格洗牌
  - `--grid`图像被划分为多少网格。
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325154709788.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `HueSaturationValue(hue_shift_limit=20, sat_shift_limit=30, val_shift_limit=20, p=0.5)`色调饱和度值`

  - `--hue_shift_limit=20`色调偏移限制,更改色调的范围。如果hue_shift_limit是单个int，则范围为（-hue_shift_limit，hue_shift_limit）。默认值：（-20，20）。

  -  `--sat_shift_limit=30`饱和度，改变饱和度的范围。如果sat_shift_limit是一个整数，则范围为（-sat_shift_limit，sat_shift_limit）。默认值：（-30，30）。

  - `--val_shift_limit`值变化，更改值的范围。如果val_shift_limit是单个int，则范围将是（-val_shift_limit，val_shift_limit）。默认值：（-20，20）。

  - `--p`代表概率

  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/2020032515473931.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }



- `PadIfNeeded(min_height=1024, min_width=1024, border_mode=4, value=None, mask_value=None,  p=1.0)`填充图像
  - `--min_height`最小高度（int）–最小结果图像高度
  - `--min_width`最小宽度（int）–最小结果图像宽度
  - `-- border_mode`OpenCV边框模式
  - `--value`值，如果border_mode为cv2.border_常量，则填充值。
  - `--mask_value`（int，float，（mask_value）–int列表，lisft of float）：如果border_mode为cv2.border_常量，则为mask填充值。
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325154806209.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `RGBShift(r_shift_limit=20, g_shift_limit=20, b_shift_limit=20, p=0.5)`随机平移R、G、B通道值。
  - `--r_shift_limit`更改红色通道值的范围。如果r_shift_limit是一个整数，则范围为（-r_shift_limit，r_shift_limit）。默认值：（-20，20）。
  - `--g_shift_limit`更改绿色通道值的范围。如果r_shift_limit是一个整数，则范围为（-r_shift_limit，r_shift_limit）。默认值：（-20，20）。
  - `--b_shift_limit`更改蓝色通道值的范围。如果r_shift_limit是一个整数，则范围为（-r_shift_limit，r_shift_limit）。默认值：（-20，20）。
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325154835142.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `RandomBrightness(limit=0.2, p=0.5)`随机亮度
  - `--limit`用于更改亮度的因子范围。如果limit是单浮点数，则范围为（-limit，limit）。默认值：（-0.2，0.2）。
  - `--p`代表概率,
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325154856586.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `RandomContrast(limit=0.2, p=0.5)`随机对比度
  - `--limit`用于更改对比度的因子范围。如果limit是单浮点数，则范围为（-limit，limit）。默认值：（-0.2，0.2）。
  - `--p`代表概率,
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325154919187.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `MotionBlur(blur_limit=7, p=0.5)`运动模糊
  - `--blur_limit`模糊输入图像的最大内核大小。应该在[3，inf]范围内。默认值：（3，7）
  - `--p`代表概率,
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325154941342.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `MedianBlur(blur_limit=7, p=0.5)`中心模糊
  - `--blur_limit`用于模糊输入图像的最大孔径线性大小。必须是奇数并且在[3，inf]范围内。默认值：（3，7）
  - `--p`代表概率,
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155003415.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `GaussianBlur(blur_limit=7, p=0.5)`高斯模糊
  - `--blur_limit`用于模糊输入图像的最大高斯核大小。必须为零或奇数且在[3，inf]范围内。默认值：（3，7）
  - `--p`代表概率,
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155038636.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `GaussNoise(var_limit=(10.0, 50.0), mean=None, p=0.5)`高斯噪声
  - `--var_limit`噪声的方差范围。如果var_limit是单浮点数，则范围为（0，var_limit）。默认值：（10.0，50.0）
  - `--mean`噪声的平均值。默认值：0
  - `--p`代表概率,
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155113415.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `GlassBlur(sigma=0.7,max_delta=4,iterations=2,mode='fast',p=0.5)`玻璃模糊
  - `--sigma`高斯核的标准差
  - `--max_delta`交换像素之间的距离
  - `--iterations`重复次数，默认值：2
  - `--mode`-计算模式：快速或精确。默认值：“快速”。
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155144457.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `CLAHE(clip_limit=4.0, tile_grid_size=(8, 8), p=0.5)`对比度受限自适应直方图均衡
  - `--clip_limit`对比度限制的阈值上限。如果clip_limit是单个浮点值，则范围为（1，clip_limit）。默认值：（1，4）
  - `--tile_grid_size`平铺网格大小（（int，int））–用于直方图均衡化的网格大小。默认值：（8，8）
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155206461.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }

- `InvertImg( p=0.5)`反转图像（通过用255减去像素值来反转输入图像）
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155237412.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `ChannelShuffle(p=0.5)`通道洗牌（随机改变RGB三通道的顺序）
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155302204.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }

- `ToGray(p=0.5)`变灰
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/2020032515532616.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


`ToSepia(p=0.5)`至深褐色

- `--p`代表概率,
- 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/2020032515535337.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `JpegCompression(quality_lower=99,quality_upper=100,p=0.5)`压缩(减少图像的Jpeg压缩)
  - `--quality_lower`质量的下限。应该在[0，100]范围
  - `--quality_upper`质量的上限。应该在[0，100]范围
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155413155.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `ImageCompression(quality_lower=99,quality_upper=100,compression_type=<ImageCompressionType.JPEG: 0>,  p=0.5)`成像压缩
  - `--quality_lower`质量的下限。应该在[0，100]范围
  - `--quality_upper`质量的上限。应该在[0，100]范围
  - `--compression_type`压缩类型（成像压缩类型）-应为成像压缩类型.jpeg或成像压缩类型.webp。Default：imagepressiontype.jpeg(可以不需要该参数)
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155438736.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `Cutout(num_holes=8, max_h_size=8, max_w_size=8, fill_value=0, p=0.5)在图像中生成正方形区域`
  - `--num_holes`要归零的区域数
  - `--max_h_size`孔的最大高度
  - `--max_w_size`孔的最大宽度
  - `--fill_value` 删除像素的值
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155500309.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `CoarseDropout(max_holes=8, max_height=8, max_width=8, min_holes=None, min_height=None, min_width=None, fill_value=0, p=0.5)`在图像上生成矩形区域。
  - `--max_holes`要归零的最大区域数
  - `--max_height`孔的最大高度
  - `--max_width`孔的最大宽度
  - `--min_holes`要归零的最小区域数。如果没有，则“最小孔”设置为“最大孔”。默认值：无。
  - `--min_height`孔的最小高度。默认值：无。如果没有，则“最小高度”设置为“最大高度”。默认值：无。
  - `--min_width`孔的最小宽度。默认值：无。如果没有，则“最小高度”设置为“最大宽度”。默认值：无。
  - `--fill_value` 删除像素的值
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155528645.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }

- `ToFloat(max_value=None, p=1.0)`图像除一个值，默认值为图像数据类型的最大值。将像素值除以max_value得到一个float32输出数组，其中所有值都在[0，1.0]范围内。如果max_value为None，则变换将尝试通过检查输入图像的数据类型来推断最大值。
  - `--max_value`可能的最大输入值。默认值：无
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155548874.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `FromFloat(dtype='uint16', max_value=None, p=1.0)`将像素值除以max_value得到一个float32输出数组，其中所有值都在[0，1.0]范围内。
  - `--max_value`最大输入值。默认值：无
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155744236.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `Crop(x_min=0, y_min=0, x_max=1024, y_max=1024,  p=1.0)`裁剪图像，其与RandomCrop的区别是可以指定最小值和最大值，而RandomCrop只能指定宽高。	
  - `--x_min`左上角的最小x坐标
  - `--y_min`左上角的最小y坐标
  - `--x_max右下角的最大x坐标
  - `--y_max`右下角的最大y坐标
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155633758.jpg){ width=30% }


- `CropNonEmptyMaskIfExists(height, width, ignore_values=None, ignore_channels=None, p=1.0)`带有遮罩的裁剪区域如果遮罩为非空，则进行随机裁剪。
  - `--height`裁剪的垂直大小
  - `--width`裁剪的水平大小
  - `--ignore_values`掩码中要忽略的值，总是忽略0个值
  - `--ignore_channels`要在掩码中忽略的通道
  - `--p`代表概率,
  - 效果：



- `RandomScale(scale_limit = 0.1,interpolation = 1,p = 0.5 )`随机缩放图像大小。
  - `--scale_limit`比例限制,比例因子范围。如果scale_limit是单个浮点值，则范围为（1-scale_limit，1+scale_limit）。默认值：（0.9，1.1）。
  - `--interpolation`指定插值算法的标志（cv2.INTER_NEAREST、cv2.INTER_LINEAR、cv2.INTER_CUBIC、cv2.INTER_AREA、cv2.INTER_LANCZOS4），默认值：cv2.INTER_LINEAR
  - `--p`代表概率,
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155803809.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `LongestMaxSize(max_size = 1024,interpolation = 1,p = 1 )`缩放图像，使最大边等于max_size，保持初始图像的纵横比。
  - `--max_size`转换后图像的最大大小
  - `--interpolation`插值方法。默认值：cv2.INTER_LINEAR
  - `--p`代表概率,
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325155923959.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }

- `SmallestMaxSize(max_size = 1024,interpolation = 1,p = 1)`缩放图像，使最小边等于max_size，保持初始图像的纵横比。
  - `--max_size`转换后图像的最大大小
  - `--interpolation`插值方法。默认值：cv2.INTER_LINEAR
  - `--p`代表概率,
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325160012988.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `Resize(height,width,interpolation = 1,p = 1 )`将输入图像调整为给定的高度和宽度。
  - `--height`输出所需的高度
  - `--width`输出所需的宽度
  - `--interpolation`指定插值算法的标志（cv2.INTER_NEAREST、cv2.INTER_LINEAR、cv2.INTER_CUBIC、cv2.INTER_AREA、cv2.INTER_LANCZOS4），默认值：cv2.INTER_LINEAR
  - `--p`代表概率,
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325160059199.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `RandomSizedCrop(min_max_height=(int,int),height,width,w2h_ratio = 1.0,interpolation = 1,p = 1.0 )`随机裁剪图像并缩放到固定大小。
  - `--min_max_height`裁剪大小限制
  - `--height`输出裁剪和调整大小后的高度
  - `--width`输出裁剪和调整大小后的宽度
  - `--w2h_ratio`裁剪的长宽比
  - `--interpolation`指定插值算法的标志（cv2.INTER_NEAREST、cv2.INTER_LINEAR、cv2.INTER_CUBIC、cv2.INTER_AREA、cv2.INTER_LANCZOS4），默认值：cv2.INTER_LINEAR
  - `--p`代表概率,
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325160117245.jpg){ width=30% }


- `RandomBrightnessContrast（brightness_limit = 0.2，contrast_limit = 0.2，brightness_by_max = None，p = 0.5 )`随机更改输入图像的亮度和对比度。
  - `--brightness_limit`用于更改亮度的因子范围。如果limit是单浮点数，则范围为（-limit，limit）。默认值：（-0.2,0.2)
  - `--contrast_limit`用于更改对比度的因子范围。如果limit是单浮点数，则范围为（-limit，limit）。默认值：（-0.2，0.2）。
  - `--brightness_by_max`如果为真，则按图像数据类型最大值调整对比度，否则按图像平均值调整对比度。
  - `--p`代表概率,
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325160140240.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `RandomCropNearBBox(max_part_shift = 0.3,p = 1.0 )`随机平移bbox的x，y坐标并从图像中裁剪。
  - `--max_part_shift`最大偏移部分，浮点值在（0.0，1.0）范围内。默认值0.3
  - `--p`代表概率,
  - 效果：



- `ISONoise(color_shift=(0.01, 0.05), intensity=(0.1, 0.5), p=0.5)`施加摄像头传感器噪音
  - `--color_shift`颜色偏移（浮动，浮动）–色相变化的变化范围。在HLS颜色空间中测量为360度色调角度的分数。
  - `--intensity`强度（（float，float）–控制颜色和亮度噪声强度的乘法因子。
  - `--p`代表概率,
  - 效果：



输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/2020032516020548.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `Solarize(threshold=128, p=0.5)`反转高于阈值的所有像素值。
  - `--threshold`阈值，阈值是单个值，范围将是[阈值，阈值]默认值（如果）–128
  - `--p`代表概率,
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325160230407.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


### 1.4 目标检测增强

```python
# -*- coding: utf-8 -*-
"""
Created on Wed Mar 18 16:33:24 2020
"E:\\test_juanyuanzi\\data\\20190925013246267.xml"
@author: Administrator
"""
import xml.dom.minidom
import cv2
from albumentations import( 
        BboxParams, RandomGamma,Compose,Blur,CenterCrop,HueSaturationValue,
        MotionBlur,Cutout
)
import os
import glob

def read_xml(path):
    exp_xml = []
    dom = xml.dom.minidom.parse(path)
    root = dom.documentElement

    img_name = root.getElementsByTagName("filename")[0]
    exp_xml.append(img_name.childNodes[0].data+".jpg")
    #print("fileneme:%s"%img_name.childNodes[0].data)
    label = root.getElementsByTagName("name")[0]
    exp_xml.append(label.childNodes[0].data)
    
    bonbox_xmin = root.getElementsByTagName("xmin")[0]
    exp_xml.append(bonbox_xmin.childNodes[0].data)
    bonbox_ymin = root.getElementsByTagName("ymin")[0]
    exp_xml.append(bonbox_ymin.childNodes[0].data)
    bonbox_xmax = root.getElementsByTagName("xmax")[0]
    exp_xml.append(bonbox_xmax.childNodes[0].data)
    bonbox_ymax = root.getElementsByTagName("ymax")[0]
    exp_xml.append(bonbox_ymax.childNodes[0].data)
    
    return exp_xml

def modify_xml(path,bbox,new_img_name,aug_file,num,n):
    new_dom = xml.dom.minidom.parse(path)
    new_root = new_dom.documentElement
    
    new_img_xml_name = new_root.getElementsByTagName("filename")[0]
    new_img_xml_name.childNodes[0].data = new_img_name
    
    new_bonbox_xmin = new_root.getElementsByTagName("xmin")[0]
    new_bonbox_xmin.childNodes[0].data = bbox[0]
    new_bonbox_ymin = new_root.getElementsByTagName("ymin")[0]
    new_bonbox_ymin.childNodes[0].data = bbox[1]
    new_bonbox_xmax = new_root.getElementsByTagName("xmax")[0]
    new_bonbox_xmax.childNodes[0].data = bbox[2]
    new_bonbox_ymax = new_root.getElementsByTagName("ymax")[0]
    new_bonbox_ymax.childNodes[0].data = bbox[3]
    
    with open(os.path.join(aug_file, aug_file+"\\aug_img{}_{}.xml".format(n,num)), 'w') as fh:
        new_dom.writexml(fh)
        
def visualize_bbox(img, bbox, class_id, class_idx_to_name):
    bbox = list(bbox)
    x_min, y_min, x_max, y_max = bbox
    x_min = int(x_min)
    y_min = int(y_min)
    x_max = int(x_max)
    y_max = int(y_max)
    image = cv2.rectangle(img, (x_min, y_min), (x_max, y_max), (255,0,0), 2)
    class_name = class_idx_to_name[class_id]
    ((text_width, text_height), _) = cv2.getTextSize(class_name, cv2.FONT_HERSHEY_SIMPLEX, 0.35, 1)    
    cv2.rectangle(image, (x_min, y_min - int(1.3 * text_height)), (x_min + text_width, y_min), (255,0,0), -1)
    cv2.putText(image, class_name, (x_min, y_min - int(0.3 * text_height)), cv2.FONT_HERSHEY_SIMPLEX, 0.35,(255,255,255), lineType=cv2.LINE_AA)   
    return image

def get_aug(aug, min_area=0., min_visibility=0.):
    return Compose(aug, bbox_params=BboxParams(format='pascal_voc', min_area=min_area, 
                                               min_visibility=min_visibility, label_fields=["category_id"]))

def augment():
    aug = Compose([
        Blur(blur_limit = 7,p = 0.3),
        RandomGamma(gamma_limit=(80,120),p=0.5),
        CenterCrop(height=400, width=400, p=0.2),
        HueSaturationValue(hue_shift_limit=20, sat_shift_limit=30, val_shift_limit=20, p=0.3),
        MotionBlur(blur_limit=7, p=0.5),
        Cutout(num_holes=8, max_h_size=8, max_w_size=8, fill_value=0, always_apply=False, p=0.2)
                   ])
    return aug

def get_data(xml_date_path,img_path):
    xml_date = read_xml(xml_date_path)
    img = cv2.imread(img_path + '\\' + xml_date[0])
    bbox = [[int(xml_date[2]),int(xml_date[3]),int(xml_date[4]),int(xml_date[5])]]
    return bbox,img

def keep_aug_img(annotations):
    aug_img = annotations['image'].copy()
    for idx, bbox in enumerate(annotations['bboxes']):
         bbox = list(bbox)
         x_min, y_min, x_max, y_max = bbox
         x_min = int(x_min)
         y_min = int(y_min)
         x_max = int(x_max)
         y_max = int(y_max)
    aug_bbox = [x_min,y_min,x_max,y_max]
    return aug_img,aug_bbox

def visualize(annotations, category_id_to_name):
    img = annotations['image'].copy()
    for idx, bbox in enumerate(annotations['bboxes']):
        img = visualize_bbox(img, bbox, annotations['category_id'][idx], category_id_to_name)
    return img

def main():
    xml_img_path = r"H:\darknet_y\data\car"  #存放xml和img数据地址
    aug_file = r"H:\darknet_y\data\car\aug_file"  #增强xml和img数据存放地址
    shample = 6  #需要增强的次数
    for n in range(shample):
        num= 0
        print("第%d次"%n)
        for xml_name in glob.glob(xml_img_path + "/*.xml"):  #循环
            print("第%d张图片"%num)
            bbox,img = get_data(xml_name,xml_img_path)  #获得img以及xml中bbox坐标。
        
            annotations = {'image': img, 'bboxes': bbox, 'category_id': [1]} 
        
            aug = augment()
            augmented = aug(**annotations)
            #category_id_to_name = {1:"juanyuanzi"}
            #img,bbox = visualize(augmented, category_id_to_name)
            #cv2.imshow("x",img)
            #cv2.waitKey(0)   
            """可视化"""
        
            aug_img,aug_bbox = keep_aug_img(augmented) #增强后的图像及相对应的坐标
            cv2.imwrite(aug_file+"\\aug_img{}_{}.jpg".format(n,num),aug_img) #img保存
            new_xml_path = os.path.split(aug_file+"\\aug_img{}_{}.jpg".format(n,num))[1] #获取增强xml地址
            new_xml_name = new_xml_path.split(".")[0] #获取xml名字
            modify_xml(xml_name,aug_bbox,new_xml_name,aug_file,num,n) #对xml文件进行修改
        
            num += 1

    
if __name__ == "__main__":
    main()
```

###  1.5 图像分割增强

```python 
# -*- coding: utf-8 -*-
"""
Created on Mon Mar 23 09:14:42 2020

@author: Administrator
"""
import glob
import cv2
from albumentations import (
    PadIfNeeded,
    HorizontalFlip,
    VerticalFlip,    
    CenterCrop,    
    Crop,
    Compose,
    Transpose,
    RandomRotate90,
    ElasticTransform,
    GridDistortion, 
    OpticalDistortion,
    RandomSizedCrop,
    OneOf,
    CLAHE,
    RandomBrightnessContrast,    
    RandomGamma    
)

def data_num(train_path,mask_path):
    train_img = glob.glob(train_path)
    masks = glob.glob(mask_path)
    return train_img,masks

def mask_aug():
    aug = Compose([
            RandomRotate90(p=1),
            CenterCrop(p=1, height=300, width=300)
                   ])
    return aug

def main():
    train_path=r"E:\augmentor\mask_augmentor\original/*.jpg" #输入img地址
    mask_path=r"\augmentor\mask_augmentor\segmentation/*.png" #输入mask地址
    augtrain_path=r"E:\augmentor\mask_albumentations\augtrain_path" #输入增强img存放地址
    augmask_path=r"E:\augmentor\mask_albumentations\augmask_path" #输入增强mask存放地址
    num = 2      #输入增强图像增强的张数。
    aug = mask_aug()
    train_img,masks = data_num(train_path,mask_path)
    for data in range(len(train_img)):
        for i in range(num):
            image = cv2.imread(train_img[data])
            mask = cv2.imread(masks[data])

            augmented = aug(image=image, mask=mask)

            aug_image = augmented['image']
            aug_mask = augmented['mask']
        
            cv2.imwrite(augtrain_path+"\\aug_img{}_{}.jpg".format(data,i),aug_image) 
            cv2.imwrite(augmask_path+"\\aug_mask{}_{}.png".format(data,i),aug_mask)
            print(data)
            #cv2.imshow("x",aug_image)
            #cv2.imshow("y",aug_mask)
            #cv2.waitKey(0)
    
if __name__ == "__main__":
    main()
```





## 2. 数据增强库Augmentor用法

### 2.1 简介

Augmentor是一个Python包，旨在帮助机器学习任务的图像数据人工生成和数据增强。它主要是一种数据增强工具，但也将包含基本的图像预处理功能。Augmentor包含许多用于标准图像处理功能的类，例如Rotate 旋转类、Crop 裁剪类等等。 包含的操作有：旋转rotate、裁剪crop、透视perspective skewing、shearing、弹性形变Elastic Distortions、亮度、对比度、颜色等等；更多的操作及其参数设定。

数据增强通常是一个多阶段过程，Augmentor因此采用基于管道的处理方法，操作依次添加形成最终的操作管道。图像送到管道中，管道的操作依次作用到图片上形成新的图片，保存下来。
Augmentor 管道中定义的操作按照一定的概率随机地作用于图片上。

### 2.2 环境配置

- Python3.6.3
- Agumentor 0.2.8（通过`pip install Augmentor`）

### 2.3 分类Augmentor示例

`import Augmentor`

`p = Augmentor.Pipeline(path)	`

- `--path`代表图像文件夹地址

#### 2.3.1旋转

- `p.rotate90(probabilty=1)` 实现图像旋转90度。
- `p.rotate180(probability=1)`实现图像旋转180度。
- `p.rotate270(probability=1)实现图像旋转270度。`
- `p.rotate_random_90(probability=1)` 实现图像随机旋转90度
- `p.rotate_random_180(probability=1)`实现图像随机旋转180度
- `p.rotate_random_270(probability=1)`实现图像随机旋转270度
  - `--probabilty` 代表执行此操作的概率，范围（0，1）。
  - `--?`
  - 图像旋转90度效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325142640148.png){ width=30% }

- `p.rotate(probability=1,max_left_rotation=20, max_right_rotation=20)`随机左右旋转并剪切
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--max_lift_rotation`代表执行操作的最大左旋转，范围（0，25）
  - `--max_right_rotation`代表执行操作的最大右旋转，范围（0，25）
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325144621815.png){ width=30% }

- `p.rotate_without_crop(probability=1,max_left_rotation=20,max_right_rotation=20,expand=False)`旋转图像而不自动剪切
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--max_lift_rotation`代表执行操作的最大左旋转，范围（0，25）
  - `--max_right_rotation`代表执行操作的最大右旋转，范围（0，25）
  - `expand`代表控制是否放大图像以包含新的旋转图像，或者是否保存图像大小默认为`false`
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325142910656.png){ width=30% }




#### 2.3.2 镜像

- `p.flip_top_bottom(probability=1)`上下翻转
- `p.flip_left_right(probability=1) `左右翻转
- `p.flip_random(probability=1)`随机翻转
  - `--probability`代表执行操作的概率，范围（0，1）
  - 上下翻转效果：


输入图片：

 ![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325142940442.png){ width=30% }



#### 2.3.3 弹性扭曲

- p.random_distortion(probability=1, grid_width=10, grid_height=10, magnitude=10)随机失真
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--grid_width`代表执行操作网格宽度，范围（2，10）
  - `--grid_height代表执行操作网格高度，范围（2，10）
  - `--magnitude`代表执行操作的振幅，范围（1，10）
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325143049328.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- p.gaussian_distortion(probability=1, grid_width=10, grid_height=10, magnitude=10, corner="bell", method="in", mex=0.5, mey=0.5, sdx=0.05, sdy=0.05)随机失真
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--grid_width`代表执行操作网格宽度，范围（2，10）
  - `--grid_height代表执行操作网格高度，范围（2，10）
  - `--magnitude`代表执行操作的振幅，范围（1，10）
  - `--corner`代表执行操作需要扭曲图片的哪个角，取值“`bel`（应用的圆形曲面）”、"`ul`（坐上）"、"`ur`（右上）"、"`dl`（左下）"、"`dr`（右下）"
  - `--method`代表执行操作可能发生的值，取值`in`（所选角应用最大幅度）、`out`与in相反
  - `--mex`用于生成类似扭曲的三维曲面。曲面是基于正态分布的。
  - `--mey用于生成类似扭曲的三维曲面。曲面是基于正态分布的。
  - `--sdx`用于生成类似扭曲的三维曲面。曲面是基于正态分布的。
  - `--sdy`用于生成类似扭曲的三维曲面。曲面是基于正态分布的。
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325143125250.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }

#### 2.3.4  放大缩小

- `p.zoom(probability=1, min_factor=1.1, max_factor=1.5)`保持其大小放大图像。
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--min_factor`代表执行操作的最小值。
  - `--max_factor`代表执行操作的最大值。
  - 效果：

输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325143205893.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- p.zoom_random(probability=1, percentage_area=0.7, randomise_percentage_area=True)随机缩放
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--percentage_area`代表需要缩放的比例。
  - `--randomise_precentage`设置为`True`，可以随机缩放。
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325143237955.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `p.scale(probability=1, scale_factor=1.4)`缩小或放大图像
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--scale_factor`代表比例缩放的因子
  - 效果：原图尺度：400 X 300   操作后图像尺度：560 X 420。

- `p.resize(probability=1, width=200, height=150, resample_filter="BICUBIC")`调整大小
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--width`代表执行操作后图像的宽度。
  - `--height`代表执行操作后图像的高度。
  - `--resample_filter`代表执行操作重采样过滤器。（注：使用的重采样过滤器。必须是双三次、双线性、反别名或最近值之一）
  - 效果：原图像：400 X 300    操作后图像像素：200 X 150。

#### 2.3.5 裁剪操作

- `p.crop_by_size(probability=1, width=260, height=160, centre=True)`按大小定义裁剪
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--width`代表执行操作后图像的宽度。
  - `--height`代表执行操作后图像的高度。
  - `--centre`代表执行操作如果为真，则从图像中心裁剪，否则在图像内的任意位置裁剪，保持指定的尺寸
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/2020032514360648.png){ width=30% }

- `p.crop_centre(probability=1, percentage_area=0.5, randomise_percentage_area=False)`图像的中心裁剪为图像面积的百分比
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--percentage_area`代表图像面积百分比。
  - `--randomise_percentage_area=False`代表如果为真，将使用面积百分比作为上限，并从0到面积百分比之间随机化作物。如果为假，将图像的中心裁剪为图像面积的百分比。
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325143337508.png){ width=30% }

- `p.crop_random(probability=1, percentage_area=0.5, randomise_percentage_area=False)`根据要返回的百分比区域裁剪图像的随机区域
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--percentage_area`代表图像面积百分比。
  - `--randomise_percentage_area=False`代表如果为真，将使用面积百分比作为上限，并从0到面积百分比之间随机化作物。如果为假，根据要返回的百分比区域裁剪图像的随机区域。
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/2020032514370796.png){ width=30% }


- `p.shear(probability=1, max_shear_left=20, max_shear_right=25)`指定的度数剪切图像
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--max_shear_left`代表执行操作的最大左剪度，范围（0，25）
  - `--max_shear_right`代表执行操作的最大右剪度，范围（0，25）
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325143731124.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


#### 2.3.6 倾斜扭曲

- `p.skew_left_right(probability=1, magnitude=1)`左右倾斜
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--magnitude`代表执行操作的幅度，范围（0，1），其中1代表45度的倾斜度。
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325143803973.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `p.skew_top_bottom(probability=1, magnitude=1)`上下倾斜
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--magnitude`代表执行操作的幅度，范围（0，1），其中1代表45度的倾斜度。
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325143826886.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }



- `p.skew_tilt(probability=1, magnitude=1)`随机数量向前、向后、向左或向右倾斜随机方向来扭曲图像
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--magnitude`代表执行操作的幅度，范围（0，1），其中1代表45度的倾斜度。
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325143858614.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `p.skew_corner(probability=1, magnitude=1)`随机向一个角倾斜一个随机大小
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--magnitude`代表执行操作的幅度，范围（0，1），其中1代表45度的倾斜度。
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325144737902.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `p.skew(probability=1, magnitude=1)`随机方向（从左到右、从上到下或8个角方向之一）扭曲图像
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--magnitude`代表执行操作的幅度，范围（0，1），其中1代表45度的倾斜度。
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325143934854.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


#### 2.3.7 色彩变化

- `p.histogram_equalisation(probability=1.0)`直方图均衡
  - `--probability`代表执行操作的概率，范围（0，1）
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/2020032514401099.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `p.greyscale(probability=1)`图像转换为灰度。
  - `--probability`代表执行操作的概率，范围（0，1）
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

 ![](https://img-blog.csdnimg.cn/20200325144029943.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `p.black_anp.d_white(probability=1, threshold=128)`将图像转换为黑白
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--threshold`代表执行操作的阈值，范围（0，255）
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325144128757.png){ width=30% }

- p.invert(probability=1)反转图像
  - `--probability`代表执行操作的概率，范围（0，1）
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/2020032514415536.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }

- `p.random_brightness(probability=1,min_factor=1,max_factor=2)`随机亮度
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--min_factor`代表执行操作的图像亮度最小值。
  - `--max_factor`代表执行操作的图像亮度最大值。
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325144217826.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `p.random_color(probability=1,min_factor=20,max_factor=25)`随机颜色
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--min_factor`代表执行操作的图像颜色最小值。
  - `--max_factor`代表执行操作的图像颜色最大值。
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325144238589.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }


- `p.random_contrast(probability=1,min_factor=20,max_factor=25)`随机改变图像对比度
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--min_factor`代表执行操作的图像对比度最小值。
  - `--max_factor`代表执行操作的图像对比度最大值。
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325144304380.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc1NTQ3OA==,size_16,color_FFFFFF,t_70){ width=30% }

- `p.random_erasing(probability=1, rectangle_area=0.2)`随机擦除
  - `--probability`代表执行操作的概率，范围（0，1）
  - `--percentage_area`代表图像面积百分比，范围（0.1,1）
  - 效果：


输入图片：

![](https://img-blog.csdnimg.cn/2020052615204773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0REX1BQX0pK,size_16,color_FFFFFF,t_70){ width=30% }

输出图片：

![](https://img-blog.csdnimg.cn/20200325144323595.png){ width=30% }




### 2.4 图像分类代码实现



```python
import Augmentor

path = "E:\\san\\car" #输入图像文件夹地址
p = Augmentor.Pipeline(path)

p.crop_by_size(probability=0.5, width=260, height=160, centre=True)
p.rotate(probability=0.5,max_left_rotation=5, max_right_rotation=5)
p.flip_left_right(probability=0.5)
p.random_brightness(probability=0.5,min_factor=1,max_factor=1.2)
p.random_erasing(probability=0.3, rectangle_area=0.2)

p.sample(100) #输入增强图像的张数
```

### 2.5 目标分割代码实现

```python		
# -*- coding: utf-8 -*-
"""
Created on Fri Mar 20 09:18:48 2020

@author: Administrator
"""
import Augmentor
import glob
import os
import cv2

def save_one_data(train_path,mask_path,augtrain_path,augmask_path):
    train_img = glob.glob(train_path)
    masks = glob.glob(mask_path)

    if len(train_img) != len(masks):
        print('train images can not match with train masks')
    else:    
        train_img.sort()
        masks.sort()
        zipped = list(zip(train_img, masks))
        cnt = 0
        path1 = []
        path2 = []
        for i in range(len(train_img)):
            path1.append(zipped[i][0])
            path2.append(zipped[i][1])
        
            train_img_tmp_path = augtrain_path + '/' + str(i)
            if not os.path.lexists(train_img_tmp_path):
                os.mkdir(train_img_tmp_path)
                img = cv2.imread(path1[i])
                img = cv2.cvtColor(img,cv2.COLOR_BGR2RGB)
                cv2.imwrite(train_img_tmp_path + '/' + str(i) + '.' + 'png',img)
            
            mask_img_tmp_path = augmask_path + '/' + str(i)
            if not os.path.lexists(mask_img_tmp_path):
                os.mkdir(mask_img_tmp_path)
                mask = cv2.imread(path2[i])
                mask = cv2.cvtColor(mask,cv2.COLOR_BGR2RGB)
                cv2.imwrite(mask_img_tmp_path + '/' + str(i) + '.' + 'png',mask)
                cnt += 1
    return cnt

def aug_data(cnt,aug_num,augtrain_path,augmask_path):
    for j in range(cnt):
        p = Augmentor.Pipeline(augtrain_path+"/"+str(j))
        p.ground_truth(augmask_path+"/"+str(j))
        p.rotate(probability=1, max_left_rotation=5, max_right_rotation=5)
        p.flip_left_right(probability=0.5)
        p.zoom_random(probability=0.5, percentage_area=0.8)
        p.flip_top_bottom(probability=0.5)
        p.sample(aug_num)
        
def save_sug_data(cnt,augtrain_path,augimg_save,augmask_save):
    for n in range(cnt):
        path = augtrain_path+"\\"+"{}".format(n)+"\\"+"output"
        any_picture = os.listdir(path)
        long_data = len(any_picture)
        bet = long_data//2
        for img_mask_num in range(bet):
            end_path_mask = path+"\\"+any_picture[img_mask_num]
            end_path_img = path+"\\"+any_picture[bet]
            img1 = cv2.imread(end_path_mask)
            img1 = cv2.cvtColor(img1,cv2.COLOR_BGR2RGB)
            cv2.imwrite(augimg_save + '\\' + "{}".format(n)+"_"+str(img_mask_num) + '.' + 'png',img1)
            img2 = cv2.imread(end_path_img)
            img2 = cv2.cvtColor(img2,cv2.COLOR_BGR2RGB)
            cv2.imwrite(augmask_save + '\\' +"{}".format(n)+"_"+str(img_mask_num) + '.' + 'png',img2)
def main():       
    train_path=r"E:\tool\mask_augmentor\original/*.jpg"
    mask_path=r"E:\tool\mask_augmentor\segmentation/*.png"
    augtrain_path=r"E:\tool\mask_augmentor\one_trainimg"
    augmask_path=r"E:\tool\mask_augmentor\one_trainmask"
    augimg_save = r"E:\tool\mask_augmentor\img"
    augmask_save = r"E:\tool\mask_augmentor\mask"
    aug_num = 3
    num = save_one_data(train_path,mask_path,augtrain_path,augmask_path)
    aug_data(num,aug_num,augtrain_path,augmask_path)
    save_sug_data(num,augtrain_path,augimg_save,augmask_save)

if __name__ == "__main__":
    main()
```
